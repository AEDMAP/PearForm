

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PearForm - Documentation &mdash; PearForm  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PearForm  documentation" href="#"/> 

  
  <script src="static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> PearForm
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">PearForm - Documentation</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
<li><a class="reference internal" href="#code-snippet">Code Snippet</a></li>
<li><a class="reference internal" href="#what-is-it">What is it</a></li>
<li><a class="reference internal" href="#why">Why</a><ul>
<li><a class="reference internal" href="#common-form-challenges">Common Form Challenges</a></li>
<li><a class="reference internal" href="#pearform-philosophy">PearForm Philosophy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-it-works">How it works</a><ul>
<li><a class="reference internal" href="#basic-sample">Basic sample</a></li>
<li><a class="reference internal" href="#ease-fields-instantiation-form-builder">Ease fields instantiation: <strong>Form Builder</strong></a></li>
<li><a class="reference internal" href="#prefill">Prefill</a></li>
<li><a class="reference internal" href="#create-custom-field">Create Custom Field</a></li>
<li><a class="reference internal" href="#conditional-add">Conditional Add</a></li>
<li><a class="reference internal" href="#custom-validation">Custom Validation</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">PearForm</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>PearForm - Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pearform-documentation">
<h1>PearForm - Documentation<a class="headerlink" href="#pearform-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
<div class="section" id="code-snippet">
<h1>Code Snippet<a class="headerlink" href="#code-snippet" title="Permalink to this headline">¶</a></h1>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">formView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FormView</span><span class="o">(</span><span class="n">mContext</span><span class="o">);</span>
<span class="n">FormBuilder</span> <span class="n">field</span> <span class="o">=</span> <span class="n">mFormView</span><span class="o">.</span><span class="na">getFormBuilder</span><span class="o">();</span>
<span class="n">formView</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">text</span><span class="o">(</span><span class="n">FIRST_NAME_KEY</span><span class="o">,</span> <span class="s">&quot;First name&quot;</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">firstname_error</span><span class="o">),</span> <span class="n">textValidator</span><span class="o">))</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">text</span><span class="o">(</span><span class="n">LAST_NAME_KEY</span><span class="o">,</span> <span class="s">&quot;Last name&quot;</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">lastname_error</span><span class="o">),</span> <span class="n">textValidator</span><span class="o">))</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="n">EMAIL_KEY</span><span class="o">,</span> <span class="s">&quot;Email&quot;</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">email_error</span><span class="o">),</span> <span class="n">emailValidator</span><span class="o">))</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">text</span><span class="o">(</span><span class="n">ZIP_CODE_KEY</span><span class="o">,</span> <span class="s">&quot;Zip code&quot;</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">zipcode_error</span><span class="o">),</span> <span class="n">zipCodeValidator</span><span class="o">))</span>
  <span class="o">.</span><span class="na">addIf</span><span class="o">(</span><span class="n">isGenderInformationAvailable</span><span class="o">(),</span> <span class="n">field</span><span class="o">.</span><span class="na">spinner</span><span class="o">(</span><span class="n">ACCOUNT_GENDER</span><span class="o">))</span>
  <span class="o">.</span><span class="na">prefillWhen</span><span class="o">(</span><span class="n">prefill</span><span class="o">,</span> <span class="n">bundle</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="what-is-it">
<h1>What is it<a class="headerlink" href="#what-is-it" title="Permalink to this headline">¶</a></h1>
<p>PearForm is an <strong>Android Framework</strong> for easily creating forms :</p>
<ul class="simple">
<li><strong>collect</strong> all fields input values (as the form result)</li>
<li><strong>validation</strong> (validate all mandatory fields)</li>
<li><strong>prefill</strong>: provide information to fill fields up with</li>
<li><strong>conditional add</strong> : <strong>addIf</strong> statement allows adding a field only if the <strong>first parameter</strong> boolean condition is <strong>true</strong></li>
</ul>
<p>It is a <strong>Framework</strong> because it invites developers to build forms following a <strong>frame</strong> that enhances :</p>
<ul class="simple">
<li>modular code (every field is like a component)</li>
<li>code reuse (every field of the same type almost always has a similar handling logic, maybe a different validation procedure)</li>
<li>code clarity (the <strong>XML</strong> layout file will contain a <strong>FormView</strong> object only, clearly indicating a new developer they have a form there)</li>
<li>look and feel consistency (every field of the same type should appear the same for consistency)</li>
<li>accomodates fast changes (since fields are instanciated dinamically, changing their order or adding/removing a new field is just a matter of one line: given the <strong>Field</strong> object has been built respecting the <strong>Frame</strong>, it just needs to be chained within the form creation for it to be handled by the <strong>FormView</strong> object)</li>
</ul>
</div>
<div class="section" id="why">
<h1>Why<a class="headerlink" href="#why" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>developers time is expensive</li>
<li>repetitive tasks are boring and error prone</li>
</ul>
<p>If an application provides a consistent number of forms, pretty soon we’ll find ourselves solving the same challenges, some of which appear to me being the following:</p>
<div class="section" id="common-form-challenges">
<h2>Common Form Challenges<a class="headerlink" href="#common-form-challenges" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>create a list of fields (aiming to a consistent look and feel throughall the application)</li>
<li>collect the input value from every field to obtain a resulting form <strong>result object</strong></li>
<li>prefill the form with provided information</li>
<li>validate every field and show an error in case the check does not pass</li>
<li>validate the form when clicking on a view (attach click listener)</li>
</ul>
</div>
<div class="section" id="pearform-philosophy">
<h2>PearForm Philosophy<a class="headerlink" href="#pearform-philosophy" title="Permalink to this headline">¶</a></h2>
<p>A Form (<strong>FormView</strong>) is made of a list of components (<strong>IField</strong>). Every fields knows how to handle himself for what concerns:</p>
<ul class="simple">
<li>validating its input value</li>
<li>collect its input value to pass back to the parent</li>
<li>show error in case validation check does not succeed</li>
<li>prefill its input value in case information is available</li>
</ul>
<p>The Form act as a controller in such it iterates on the fields list and asks them to validate/collect/showError/prefill according to the action the developer wants to take on the <strong>FormView</strong>.</p>
<p>For instance to collect all fields input value, this is what happens with a call to <strong>formView.getResult()</strong>, that returns a <strong>Bundle</strong> object containing all fields input values organized by <strong>key</strong> (constant string), provided at the moment of the form creation.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span> <span class="kd">public</span> <span class="n">Bundle</span> <span class="nf">getResult</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
  <span class="k">for</span> <span class="o">(</span><span class="n">FormRow</span> <span class="n">row</span> <span class="o">:</span> <span class="n">mRows</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">isField</span><span class="o">())</span> <span class="o">{</span>
          <span class="n">IField</span> <span class="n">field</span> <span class="o">=</span> <span class="o">(</span><span class="n">IField</span><span class="o">)</span> <span class="n">row</span><span class="o">.</span><span class="na">getView</span><span class="o">();</span>
          <span class="n">Bundle</span> <span class="n">fieldResult</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
          <span class="k">if</span><span class="o">(</span><span class="n">fieldResult</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
              <span class="n">bundle</span><span class="o">.</span><span class="na">putAll</span><span class="o">(</span><span class="n">fieldResult</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">bundle</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <strong>FormView</strong> object is a simple <strong>Custom Widget</strong> extending from <strong>LinearLayout</strong>, that</p>
<ul class="simple">
<li>keeps the list of children <strong>Fields</strong> components</li>
<li>exposes simple methods to operate on them as a set.</li>
</ul>
</div>
</div>
<div class="section" id="how-it-works">
<h1>How it works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-sample">
<h2>Basic sample<a class="headerlink" href="#basic-sample" title="Permalink to this headline">¶</a></h2>
<p>Create the <strong>list of fields</strong>, add it to a <strong>FormView</strong> instance as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">MaterialText</span> <span class="n">firstName</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MaterialText</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
  <span class="o">.</span><span class="na">hint</span><span class="o">(</span><span class="n">hint</span><span class="o">)</span>
  <span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">error</span><span class="o">)</span>
  <span class="o">.</span><span class="na">resultKey</span><span class="o">(</span><span class="n">FIRST_NAME_KEY</span><span class="o">);</span> <span class="c1">// (String) key</span>

<span class="n">MaterialText</span> <span class="n">lastName</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MaterialText</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
  <span class="o">.</span><span class="na">hint</span><span class="o">(</span><span class="n">hint</span><span class="o">)</span>
  <span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">error</span><span class="o">)</span>
  <span class="o">.</span><span class="na">resultKey</span><span class="o">(</span><span class="n">LAST_NAME_KEY</span><span class="o">);</span> <span class="c1">// (String) key</span>

<span class="n">MaterialText</span> <span class="n">email</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MaterialText</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
  <span class="o">.</span><span class="na">hint</span><span class="o">(</span><span class="n">hint</span><span class="o">)</span>
  <span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">error</span><span class="o">)</span>
  <span class="o">.</span><span class="na">resultKey</span><span class="o">(</span><span class="n">EMAIL_KEY</span><span class="o">);</span> <span class="c1">// (String) key</span>

<span class="n">FormView</span> <span class="n">form</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FormView</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">firstName</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">lastName</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">email</span><span class="o">)</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>

<span class="c1">// Get the form result</span>
<span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="na">getResult</span><span class="o">();</span>
<span class="n">String</span> <span class="n">firstName</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">FIRST_NAME_KEY</span><span class="o">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>Every field must be provided of a <strong>key</strong> value (<strong>string</strong>), that will be used for finding back the value in the resulting collected <strong>Bundle</strong> object.</p>
<p><strong>Notice</strong>: the above sentence implies a <strong>key</strong> needs to be <strong>unique</strong> for that <strong>FormView</strong>, or the collecting phase will erase the input value already collected having the same <strong>key</strong>.</p>
</div>
<div class="section" id="ease-fields-instantiation-form-builder">
<h2>Ease fields instantiation: <strong>Form Builder</strong><a class="headerlink" href="#ease-fields-instantiation-form-builder" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">FormView</span> <span class="n">formView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FormView</span><span class="o">(</span><span class="n">mContext</span><span class="o">);</span>
<span class="n">FormBuilder</span> <span class="n">field</span> <span class="o">=</span> <span class="n">formView</span><span class="o">.</span><span class="na">getFormBuilder</span><span class="o">();</span> <span class="c1">// Fields generator</span>
<span class="n">formView</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">text</span><span class="o">(</span><span class="n">FIRST_NAME_KEY</span><span class="o">,</span> <span class="s">&quot;First name&quot;</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">firstname_error</span><span class="o">)))</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">text</span><span class="o">(</span><span class="n">LAST_NAME_KEY</span><span class="o">,</span> <span class="s">&quot;Last name&quot;</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">lastname_error</span><span class="o">)))</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">email</span><span class="o">(</span><span class="n">EMAIL_KEY</span><span class="o">,</span> <span class="s">&quot;Email&quot;</span><span class="o">,</span> <span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">email_error</span><span class="o">)))</span>
  <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
</div>
<div class="section" id="prefill">
<h2>Prefill<a class="headerlink" href="#prefill" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="create-custom-field">
<h2>Create Custom Field<a class="headerlink" href="#create-custom-field" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="conditional-add">
<h2>Conditional Add<a class="headerlink" href="#conditional-add" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="custom-validation">
<h2>Custom Validation<a class="headerlink" href="#custom-validation" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Mattia Primavera.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="static/jquery.js"></script>
      <script type="text/javascript" src="static/underscore.js"></script>
      <script type="text/javascript" src="static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
